# SFTPush2

SFTPush2 — лёгкое macOS‑приложение (меню‑бар + док) для быстрой загрузки файлов на ваш SFTP сервер. Поддерживает наблюдение за папкой, загрузку из буфера обмена, историю с миниатюрами и автозапуск при входе в систему.

## Возможности
- Наблюдение за выбранной папкой и автоматическая загрузка новых файлов (SFTP)
- Загрузка файлов/изображений из буфера обмена (опционально — предварительное Cmd+C в активном окне)
- Drag & drop на иконку в меню‑баре и на иконку в доке
- История загрузок с миниатюрами и быстрыми действиями
- Уведомления о результате, опции копирования/открытия URL
- Автозапуск при старте системы (Login Items, SMAppService)

## Требования
- macOS 13.0+
- Xcode 14+

## Сборка
1. Откройте `SFTPush2/SFTPush2.xcodeproj` в Xcode
2. Выберите таргет `SFTPush2` и схему `Release` или `Debug`
3. Убедитесь, что включена подпись `Apple Development` (Automatic Signing)
4. Соберите и запустите

Фреймворк SFTP (проект `mft-main`) уже включён в репозиторий и подключён как зависимость.

## Разрешения macOS
- Специальные возможности (Accessibility): для отправки Cmd+C/Cmd+W по желанию пользователя
- Уведомления: для показа уведомлений об успехе/ошибках

## Настройки (Settings)
- General: наблюдаемая папка, уведомления, звук, автозапуск, лимиты истории/размера
- SFTP: хост, порт, пользователь, путь, ключ/пароль, базовый URL для формируемых ссылок
- Clipboard & Hotkeys: формат PNG/JPG, качество JPG, горячая клавиша, опции Monosnap (закрывать окно после загрузки и задержка перед закрытием, мс), поведение копирования

## Автозапуск
Опция «Автозапуск при старте системы» использует `ServiceManagement.SMAppService` для регистрации в Login Items. Состояние чекбокса соответствует фактическому состоянию в System Settings → General → Login Items.

## Известные моменты
- Иногда системная иконка уведомлений кешируется после переименования приложения — помогает перезагрузка/очистка кэша
- HTTP‑превью миниатюр может блокироваться ATS (нужен HTTPS или исключение)

## План/дальше
- Действия в уведомлениях (копирование/открытие)
- Перенос пароля SFTP в Keychain
- ATS‑исключения при необходимости

## Отказ от ответственности
Проект предназначен для личного использования. Настраивайте доступ к вашему SFTP‑серверу с учётом безопасности (ограниченные учётные записи, ключевая авторизация и т. д.).
